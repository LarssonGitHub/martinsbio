(this.webpackJsonpmartinsbio=this.webpackJsonpmartinsbio||[]).push([[0],{26:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(18),i=n.n(s),a=(n(26),n(6)),o=n(3),l=n(7),j=n(2),u=n(0);function b(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],s=function(){c((function(e){return!e}))};return Object(u.jsxs)("header",{children:[Object(u.jsx)("span",{onClick:s,children:n?"exit...":"Hamburger"}),Object(u.jsxs)("nav",{onClick:s,className:"menuNav ".concat(n?" showMenu":""),children:[Object(u.jsxs)("ul",{className:"removeListDecoration",children:[Object(u.jsx)("li",{children:Object(u.jsx)(l.b,{to:"/",children:"Home"})}),Object(u.jsx)("li",{children:Object(u.jsx)(l.b,{to:"/search",children:"Search movies"})}),Object(u.jsx)("li",{children:Object(u.jsx)(l.b,{to:"/booking",children:"Booking"})})]}),Object(u.jsx)("div",{className:"menuNavBackground"})]})]})}function h(e){var t=e.timeStamp;return Object(u.jsxs)("footer",{children:[Object(u.jsxs)("div",{className:"footerContainer",children:[Object(u.jsxs)("article",{className:"footerContacts",children:[Object(u.jsx)("h4",{children:"Contacts"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"Tel: 99992222"}),Object(u.jsx)("li",{children:"Email: CssIsHard@something.com"}),Object(u.jsx)("li",{children:"Something else.."})]})]}),Object(u.jsxs)("article",{className:"footerClock",children:[Object(u.jsx)("h4",{children:"Time"}),Object(u.jsx)("p",{children:t.date}),Object(u.jsx)("p",{children:t.time})]})]}),Object(u.jsx)("p",{className:"copyright",children:"\xa9 I take no right for this... "})]})}function d(e){var t=e.movie,n=e.timeStamp,c=e.setBookingObject,s=e.setMessage,i=Object(j.f)(),a=t.date,l=t.time,b=t.seats,h=t.movieName,d=t.img,m=Object(r.useState)(!1),O=Object(o.a)(m,2),f=O[0],x=O[1];return Object(r.useEffect)((function(){if(console.log("use effect seat ran"),!Array.isArray(b))return x(!1);var e=b.filter((function(e){return!0===e})).length;if(e<=0)return x(!1);x(e)}),[b]),Object(u.jsxs)("section",{className:"movieCard",onClick:function(){0!==f&&f?a<n.date?s("Movie is already over"):(c(t),i.push("/booking")):s("No seats dear..")},children:[a<n.date||f<=0||!f?Object(u.jsx)("div",{className:"greyedOut"}):"",d?Object(u.jsx)("img",{className:"movieCardImg",src:d,alt:h,width:"200"}):Object(u.jsx)("img",{className:"movieCardImg",src:"./assets/no_image.jpeg",alt:h,width:"200"}),Object(u.jsxs)("div",{className:"movieCardDesc",children:[Object(u.jsx)("h3",{children:h}),Object(u.jsxs)("p",{children:["Playing: ",a]}),Object(u.jsxs)("p",{children:["Starts: ",l]}),f?Object(u.jsxs)("p",{children:["Seats left: ",f]}):Object(u.jsx)("p",{children:"Fully booked"})]})]})}function m(e){var t=e.fetchedMovies,n=e.timeStamp,r=e.setBookingObject,c=e.setMessage;var s=function(e,t){var n=e,r=n.filter((function(e){return e.date===t.date})),c=(n=r).filter((function(e){return e.time.replace(":","")>=t.time.replace(":","")}));return(n=c).sort((function(e,t){return e.time.replace(":","")-t.time.replace(":","")})),0!==c.length&&c}(t,n);return Object(u.jsx)("section",{className:"listingContainer",children:s?s.map((function(e){return Object(u.jsx)(d,{movie:e,timeStamp:n,setBookingObject:r,setMessage:c},e.id)})):Object(u.jsxs)("p",{children:["No movies currently airing today! Try our ",Object(u.jsx)(l.b,{to:"/search",children:"Search"})]})})}function O(e){var t=e.fetchedMovies,n=e.timeStamp,r=e.setBookingObject;return Object(u.jsxs)("main",{children:[Object(u.jsx)("h1",{children:"Welcome to my movie"}),Object(u.jsx)("section",{children:Object(u.jsx)("p",{children:"lorem, lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lorem lore"})}),Object(u.jsxs)("section",{children:[Object(u.jsx)("h2",{children:"What's on today?"}),t&&(n.date||n.time)?Object(u.jsx)(m,{fetchedMovies:t,timeStamp:n,setBookingObject:r}):Object(u.jsx)("h1",{children:"Loading"})]})]})}var f=n(11);function x(e){var t=e.searchQuery,n=e.setsearchQuery,r=e.clearsearchQueryState,c=function(e){var t=e.target,r=t.name,c=t.value;"checkbox"===e.target.type&&(c=e.target.checked),n((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(f.a)({},r,c===String?c.toLowerCase():c))}))};return Object(u.jsxs)("nav",{children:[Object(u.jsx)("h2",{children:"Search movies"}),Object(u.jsx)("label",{htmlFor:"textInput",children:"Name of movie:"}),Object(u.jsx)("input",{name:"queryTitle",id:"textInput",type:"text",value:t.text,onInput:c}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"sortByInput",children:"Order by:"}),Object(u.jsxs)("span",{children:[Object(u.jsx)("input",{name:"querySort",id:"sortByInput",type:"radio",value:"startDate",onInput:c}),"Start Date",Object(u.jsx)("input",{name:"querySort",id:"sortByInput",type:"radio",value:"startTime",onInput:c}),"Start Time",Object(u.jsx)("input",{defaultChecked:!0,name:"querySort",id:"sortByInput",type:"radio",value:"showAll",onInput:c}),"Show all"]}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"dateInput",children:"Search Specific date"}),Object(u.jsx)("input",{type:"date",id:"dateInput",name:"queryDate",value:t.date,onInput:c})," ",Object(u.jsx)("label",{htmlFor:"timeInput",children:"Search what time"}),Object(u.jsx)("input",{type:"time",id:"timeInput",name:"queryTime",value:t.time,onInput:c}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"checkBoxAired",children:"Don't show movies that has already Aired"}),Object(u.jsx)("input",{defaultChecked:!0,type:"checkbox",id:"checkBoxAired",name:"removeAlreadyAired",checked:t.airing,onChange:c}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"checkBoxSeats",children:"Don't show movies with full seats"}),Object(u.jsx)("input",{defaultChecked:!0,type:"checkbox",id:"checkBoxSeats",name:"removeFullSeats",checked:t.seats,onChange:c}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{className:"fakeHyperlink",onClick:function(){return r()},children:"Reset search"})]})}function p(e){var t=e.fetchedMovies,n=e.timeStamp,r=e.searchQuery,c=e.setBookingObject,s=e.setMessage,i=t,a=r.queryTitle,o=r.queryDate,l=r.queryTime,j=r.querySort,b=r.removeAlreadyAired,h=r.removeFullSeats;return b&&(i=i.filter((function(e){return e.date>=n.date}))),h&&(i=i.filter((function(e){return e.seats.includes(!0)}))),a&&(i=i.filter((function(e){return e.movieName.toLowerCase().includes(a)}))),o&&(i=i.filter((function(e){return e.date.includes(o)}))),l&&(i=i.filter((function(e){return e.time>=l}))),"showAll"!==j&&("startDate"===j&&(i=i.sort((function(e,t){return e.date.replaceAll("-","")-t.date.replaceAll("-","")}))),"startTime"===j&&(i=i.sort((function(e,t){return e.time.replace(":","")-t.time.replace(":","")})))),0===i.length&&(i=!1),Object(u.jsx)("section",{className:"listingContainer",children:i?i.map((function(e){return Object(u.jsx)(d,{movie:e,timeStamp:n,setBookingObject:c,setMessage:s},e.id)})):Object(u.jsx)("p",{children:"There are no movies that matches your search D:"})})}function g(e){var t=e.fetchedMovies,n=e.timeStamp,c=e.setBookingObject,s=e.setMessage,i=Object(j.f)();var l=Object(r.useState)({queryTitle:"",queryDate:"",queryTime:"",querySort:"showAll",removeAlreadyAired:!0,removeFullSeats:!0}),b=Object(o.a)(l,2),h=b[0],d=b[1];return Object(u.jsxs)("main",{children:[Object(u.jsx)("h1",{children:"Our offering"}),Object(u.jsx)("section",{children:Object(u.jsx)(x,{searchQuery:h,setsearchQuery:d,clearsearchQueryState:function(){d(Object(a.a)({},{queryTitle:"",queryDate:"",queryTime:"",querySort:"date",removeAlreadyAired:!0,removeFullSeats:!0})),i.go(0)}})}),Object(u.jsxs)("section",{children:[Object(u.jsx)("h2",{children:"Results:"}),t&&(n.date||n.time)?Object(u.jsx)(p,{fetchedMovies:t,timeStamp:n,searchQuery:h,setBookingObject:c,setMessage:s}):Object(u.jsx)("h1",{children:"Loading"})]})]})}function v(e){var t=e.children;return Object(u.jsxs)("main",{children:[Object(u.jsx)("h1",{children:"Finish up your booking"}),t]})}var k=n(10),y=n.n(k),S=n(17),w=n(21);function C(e){var t=e.seatingIndex,n=e.seatingValue,r=e.bookSeating;return Object(u.jsx)(u.Fragment,{children:!1===n?Object(u.jsxs)("span",{className:"seat unavailable",children:["  ",Object(u.jsx)("b",{children:t})," "]}):Object(u.jsx)("span",{className:"seat ".concat("booked"!==n?"free":"booked"),onClick:r,children:Object(u.jsx)("b",{children:t})})})}function N(e){var t=e.bookingObject,n=e.setBookingObject,c=e.setMessage,s=t.seats,i=Object(j.f)(),l=Object(r.useState)(s),b=Object(o.a)(l,2),h=b[0],d=b[1],m=Object(r.useState)(1),O=Object(o.a)(m,2),f=O[0],x=O[1],p=Object(r.useState)(!0),g=Object(o.a)(p,2),v=g[0],k=g[1];function N(){f>=function(){var e=h.filter((function(e){return!0===e})).length;return 0===e?"No free seats":e}()?c("Can't order more than tickets than there are free seats"):x((function(e){return e+1}))}function B(){try{if(0!==f)throw new Error("User still has tickets");var e=h.map((function(e){return"booked"!==e&&e}));if(!Array.isArray(e)||!e.includes(!0)||!e.includes(!1))throw new Error("The validation of seats didn't go through");return n(Object(a.a)(Object(a.a)({},t),{},{seats:e})),!0}catch(r){return console.error(r),r}}function M(e){return I.apply(this,arguments)}function I(){return(I=Object(S.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(n,{method:"PUT",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){if(!e)throw new Error("something went wrong with fetch....");return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){var e=function(){for(var e="A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,0,1,2,3,4,5,6,7,8,9".split(","),t="",n=0;n<40;n++)t+=e[Math.floor(Math.random()*e.length)];return t}(),t=h.map((function(e,t){return"booked"===e?t:-1})).filter((function(e){return-1!==e}));alert("congrats, your booking number is\r\n"+e+"\r\n\r\nwith the seat Numbers of..."+t),i.go(0)}function A(){return(A=Object(S.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((t=B())instanceof Error)){e.next=4;break}throw new Error(t);case 4:return e.next=6,M("https://jsonplaceholder.typicode.com/posts/1").then((function(e){return e})).catch((function(e){return e}));case 6:if(!((n=e.sent)instanceof Error)){e.next=9;break}throw new Error(n);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),alert(e.t0),e.abrupt("return");case 15:T();case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(u.jsxs)("section",{children:[v?Object(u.jsxs)("section",{children:[Object(u.jsx)("h3",{children:"Number of Tickets"}),Object(u.jsx)("button",{onClick:function(){f<=1?c("You must at least order 1 ticket"):x((function(e){return e-1}))},children:"\u2190"}),Object(u.jsx)("p",{children:f}),Object(u.jsx)("button",{onClick:function(){return N()},children:"\u2192"}),Object(u.jsx)("button",{onClick:function(){return k(!1)},children:"Next"})]}):Object(u.jsxs)("section",{children:[Object(u.jsx)("h3",{children:"Choose your seat"}),Object(u.jsx)("div",{className:"seatingContainer",children:h.map((function(e,t){return Object(u.jsx)(C,{seatingIndex:t,seatingValue:e,bookSeating:function(){return function(e){var t=Object(w.a)(h);return!1===t[e]?c("How did you do that?"):!0===t[e]?0!==f&&f?(t[e]="booked",x((function(e){return e-1})),d(t)):c("You have already booked all your tickets.. proceed to checkout"):"booked"===t[e]?(t[e]=!0,x((function(e){return e+1})),d(t)):void 0}(t)}},t)}))}),Object(u.jsx)("button",{onClick:function(){return k(!0)},children:"Back"})]}),0===f?Object(u.jsx)("button",{onClick:function(){return function(){return A.apply(this,arguments)}()},children:"Order Your seats"}):""]})}function B(e){var t=e.children,n=e.bookingObject,r=n.movieName,c=n.img,s=n.runtime,i=n.seats,a=n.date,o=n.time;return Object(u.jsxs)("section",{children:[Object(u.jsx)("h2",{children:r}),Object(u.jsx)("p",{children:a}),Object(u.jsx)("p",{children:o}),c?Object(u.jsx)("img",{src:c,alt:r,width:"200"}):Object(u.jsx)("img",{src:"./assets/no_image.jpeg",alt:r,width:"200"}),Object(u.jsxs)("p",{children:["Runtime: ",s]}),Object(u.jsxs)("p",{children:["Seats available: ",i.filter((function(e){return e})).length," of ",i.length]}),t]})}function M(e){var t=e.message,n=e.setMessage;return""===t?"":Object(u.jsxs)("span",{className:"popupBox",children:[Object(u.jsx)("span",{className:"popupMessage",children:t})," ",Object(u.jsx)("span",{className:"popupBtn",onClick:function(){return n("")},children:"X"})]})}n(37);function I(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)({date:null,time:null}),i=Object(o.a)(s,2),d=i[0],m=i[1],f=Object(r.useState)(),x=Object(o.a)(f,2),p=x[0],k=x[1],y=Object(r.useState)(""),S=Object(o.a)(y,2),w=S[0],C=S[1];return Object(r.useEffect)((function(){fetch("data.json").then((function(e){return e.json()})).then((function(e){return c(e)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){console.log("date timestamp use effect ran");var e=setInterval((function(){var e=new Date,t=String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0");m((function(n){return Object(a.a)(Object(a.a)({},n),{},{date:e.toLocaleDateString(),time:t})}))}),1e3);return function(){return clearInterval(e)}}),[]),Object(u.jsx)("div",{className:"appContainer",children:Object(u.jsxs)(l.a,{children:[Object(u.jsx)(b,{}),Object(u.jsxs)(j.c,{children:[Object(u.jsx)(j.a,{exact:!0,path:"/",children:Object(u.jsx)(O,{fetchedMovies:n,timeStamp:d,setBookingObject:k,setMessage:C})}),Object(u.jsx)(j.a,{exact:!0,path:"/search",children:Object(u.jsx)(g,{fetchedMovies:n,timeStamp:d,setBookingObject:k,setMessage:C})}),Object(u.jsx)(j.a,{exact:!0,path:"/booking",children:Object(u.jsx)(v,{children:p?Object(u.jsx)(B,{bookingObject:p,children:Object(u.jsx)(N,{bookingObject:p,setBookingObject:k,setMessage:C})}):Object(u.jsx)("p",{children:"Sorry, you need to book a movie first!"})})}),Object(u.jsx)(j.a,{exact:!0,path:"/booking",children:Object(u.jsx)(v,{bookingObject:p,setBookingObject:k,setMessage:C})}),Object(u.jsx)(j.a,{component:T})]}),Object(u.jsx)(h,{timeStamp:d}),Object(u.jsx)(M,{message:w,setMessage:C})]})})}var T=function(){return Object(u.jsx)("h3",{children:"404 - Not found"})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),s(e),i(e)}))};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(I,{})}),document.getElementById("root")),A()}},[[38,1,2]]]);
//# sourceMappingURL=main.9c0c36ac.chunk.js.map